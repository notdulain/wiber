<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 4: Message Storage - Wiber Distributed Messaging System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #3498db, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .phase-badge {
            display: inline-block;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .nav {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        .nav a {
            color: #3498db;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav a:hover {
            background: #3498db;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 50px;
            height: 3px;
            background: #e74c3c;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
            padding-left: 20px;
            border-left: 4px solid #3498db;
        }

        .highlight-box {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-left: 5px solid #3498db;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .success-box {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.2);
        }

        .info-box {
            background: linear-gradient(135deg, #d1ecf1, #bee5eb);
            border-left: 5px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 5px 15px rgba(23, 162, 184, 0.2);
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .code-block .comment {
            color: #95a5a6;
        }

        .code-block .keyword {
            color: #e74c3c;
        }

        .code-block .string {
            color: #2ecc71;
        }

        .code-block .number {
            color: #f39c12;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            border-color: #3498db;
        }

        .feature-card h4 {
            color: #2c3e50;
            font-size: 1.3em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-card .icon {
            font-size: 1.5em;
            color: #3498db;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .comparison-table th {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #ecf0f1;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .comparison-table tr:hover {
            background: #e3f2fd;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .architecture-diagram {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            font-family: monospace;
            font-size: 1.1em;
            line-height: 1.8;
        }

        .step-list {
            counter-reset: step-counter;
            list-style: none;
            padding: 0;
        }

        .step-list li {
            counter-increment: step-counter;
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            margin: 15px 0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #3498db;
            position: relative;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .footer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .footer h3 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .footer p {
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .next-phase {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
            
            .architecture-diagram {
                font-size: 0.9em;
                padding: 20px;
            }
        }

        .copy-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
            margin-left: 10px;
            transition: background 0.3s ease;
        }

        .copy-btn:hover {
            background: #2980b9;
        }

        .terminal-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .terminal-output .prompt {
            color: #ffff00;
        }

        .terminal-output .success {
            color: #00ff00;
        }

        .terminal-output .error {
            color: #ff0000;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Phase 4: Message Storage</h1>
            <p>Building the Foundation of Persistent Message Storage</p>
            <div class="phase-badge">✅ COMPLETED</div>
        </div>

        <nav class="nav">
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#what-we-built">What We Built</a></li>
                <li><a href="#how-it-works">How It Works</a></li>
                <li><a href="#real-world-impact">Real-World Impact</a></li>
                <li><a href="#running-the-system">Running the System</a></li>
                <li><a href="#whats-next">What's Next</a></li>
            </ul>
        </nav>

        <div class="content">
            <section id="overview" class="section">
                <h2>🎯 Overview</h2>
                <div class="highlight-box">
                    <p><strong>Phase 4</strong> is where we built the <strong>"warehouse"</strong> of our messaging system. Just like Amazon needs warehouses to store products, our messaging system needs a reliable way to store messages permanently and organize them properly.</p>
                </div>

                <h3>Why Message Storage Matters</h3>
                <p>Imagine you're building a messaging app like WhatsApp or Slack. What happens if:</p>
                <ul>
                    <li>💥 The server crashes while someone is sending a message?</li>
                    <li>🔄 The system restarts and loses all recent messages?</li>
                    <li>📧 The same email gets sent twice to a user?</li>
                    <li>🗂️ All messages are mixed together with no organization?</li>
                </ul>

                <div class="success-box">
                    <p><strong>Phase 4 solves all these problems!</strong> We built three key components:</p>
                    <ol>
                        <li><strong>Persistent Storage</strong> - Messages survive crashes and restarts</li>
                        <li><strong>Duplicate Prevention</strong> - No more duplicate messages</li>
                        <li><strong>Topic Organization</strong> - Messages organized by categories</li>
                    </ol>
                </div>
            </section>

            <section id="what-we-built" class="section">
                <h2>🏗️ What We Built</h2>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4><span class="icon">💾</span>Task 4.1: Basic Commit Log</h4>
                        <p><strong>The Warehouse</strong> - A permanent storage system that saves messages to disk files. Messages survive crashes, restarts, and power outages.</p>
                        <div class="code-block">
<span class="comment"># Messages stored in files like:</span>
raft-n1.log
notifications.log
user-events.log
                        </div>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">🔍</span>Task 4.2: Message Deduplication</h4>
                        <p><strong>The Duplicate Detector</strong> - A smart system that prevents the same message from being stored twice using SHA-256 hashing.</p>
                        <div class="code-block">
<span class="comment"># Same message = Same hash = Rejected</span>
<span class="string">"Welcome to Wiber!"</span> → <span class="string">"5ba5044ee2292526..."</span> → <span class="keyword">REJECTED</span>
                        </div>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">📁</span>Task 4.3: Topic Management</h4>
                        <p><strong>The Organizer</strong> - A system that organizes messages into different categories (topics) like folders in an email system.</p>
                        <div class="code-block">
<span class="comment"># Topics like:</span>
notifications/  <span class="comment"># User alerts</span>
system-logs/    <span class="comment"># Server logs</span>
user-events/    <span class="comment"># User actions</span>
                        </div>
                    </div>
                </div>

                <h3>Technical Implementation</h3>
                <div class="architecture-diagram">
                    <strong>Message Flow Through Phase 4:</strong><br><br>
                    Message arrives<br>
                    ↓<br>
                    Check if duplicate?<br>
                    ↓<br>
                    Store in correct topic<br>
                    ↓<br>
                    Save to disk file<br>
                    ↓<br>
                    Update statistics<br><br>
                    <em>Result: Permanent, organized, duplicate-free storage!</em>
                </div>
            </section>

            <section id="how-it-works" class="section">
                <h2>⚙️ How It Works</h2>

                <h3>1. Persistent Storage (Commit Log)</h3>
                <div class="info-box">
                    <p><strong>Real-world analogy:</strong> Like a filing cabinet that never loses documents, even if the office burns down.</p>
                </div>

                <div class="code-block">
<span class="comment"># When a message arrives:</span>
message = {<span class="string">"user"</span>: <span class="string">"alice"</span>, <span class="string">"action"</span>: <span class="string">"login"</span>}

<span class="comment"># It gets stored as:</span>
{
  <span class="string">"offset"</span>: <span class="number">0</span>,
  <span class="string">"timestamp"</span>: <span class="number">1759669683.7</span>,
  <span class="string">"topic"</span>: <span class="string">"notifications"</span>,
  <span class="string">"message"</span>: {<span class="string">"user"</span>: <span class="string">"alice"</span>, <span class="string">"action"</span>: <span class="string">"login"</span>}
}
                </div>

                <h3>2. Duplicate Detection</h3>
                <div class="info-box">
                    <p><strong>Real-world analogy:</strong> Like a bouncer at a club who remembers everyone who's already inside.</p>
                </div>

                <div class="code-block">
<span class="comment"># Generate unique ID for message:</span>
content = {<span class="string">"topic"</span>: <span class="string">"notifications"</span>, <span class="string">"message"</span>: message}
message_id = <span class="keyword">sha256</span>(json.dumps(content))

<span class="comment"># Check if we've seen this ID before:</span>
<span class="keyword">if</span> message_id <span class="keyword">in</span> cache:
    <span class="keyword">return</span> -<span class="number">1</span>  <span class="comment"># Duplicate!</span>
<span class="keyword">else</span>:
    cache.add(message_id)
    <span class="keyword">return</span> offset  <span class="comment"># Store it!</span>
                </div>

                <h3>3. Topic Management</h3>
                <div class="info-box">
                    <p><strong>Real-world analogy:</strong> Like organizing emails into folders (Work, Personal, Spam).</p>
                </div>

                <div class="code-block">
<span class="comment"># Create a topic:</span>
manager.create_topic(<span class="string">"notifications"</span>, 
                    description=<span class="string">"User notifications"</span>,
                    retention_hours=<span class="number">24</span>)

<span class="comment"># Publish to topic:</span>
offset = manager.publish_message(<span class="string">"notifications"</span>, message)

<span class="comment"># Read from topic:</span>
messages = manager.read_messages(<span class="string">"notifications"</span>, offset=<span class="number">0</span>)
                </div>
            </section>

            <section id="real-world-impact" class="section">
                <h2>🌍 Real-World Impact</h2>

                <h3>What This Enables</h3>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Before Phase 4</th>
                                <th>After Phase 4</th>
                                <th>Real-World Benefit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>❌ Messages lost on crash</td>
                                <td>✅ Messages survive crashes</td>
                                <td>Users trust the system won't lose their data</td>
                            </tr>
                            <tr>
                                <td>❌ All messages mixed together</td>
                                <td>✅ Messages organized by topics</td>
                                <td>Easy to build different features (email, logs, events)</td>
                            </tr>
                            <tr>
                                <td>❌ Duplicate messages waste space</td>
                                <td>✅ Duplicates automatically rejected</td>
                                <td>System can handle millions of messages efficiently</td>
                            </tr>
                            <tr>
                                <td>❌ Single log file for everything</td>
                                <td>✅ Separate logs per topic</td>
                                <td>Can add new message types without affecting existing ones</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Real-World Applications</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4><span class="icon">📧</span>Email System</h4>
                        <p><strong>Topic:</strong> "notifications"<br>
                        <strong>Messages:</strong> Welcome emails, password resets, order confirmations<br>
                        <strong>Benefit:</strong> Reliable email delivery with no duplicates</p>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">📊</span>Analytics System</h4>
                        <p><strong>Topic:</strong> "user_events"<br>
                        <strong>Messages:</strong> Page views, clicks, purchases, logins<br>
                        <strong>Benefit:</strong> Accurate analytics data with no duplicate events</p>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">🔔</span>Real-time Notifications</h4>
                        <p><strong>Topic:</strong> "alerts"<br>
                        <strong>Messages:</strong> Server down, payment received, new message<br>
                        <strong>Benefit:</strong> Instant notifications with guaranteed delivery</p>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">📝</span>System Monitoring</h4>
                        <p><strong>Topic:</strong> "system_logs"<br>
                        <strong>Messages:</strong> Error messages, performance metrics, security events<br>
                        <strong>Benefit:</strong> Reliable logging for debugging and monitoring</p>
                    </div>
                </div>

                <div class="success-box">
                    <h4>🎯 The Big Picture</h4>
                    <p>We've built the <strong>foundation</strong> of a real messaging system like:</p>
                    <ul>
                        <li><strong>Kafka</strong> (Apache's messaging system)</li>
                        <li><strong>RabbitMQ</strong> (message broker)</li>
                        <li><strong>Amazon SQS</strong> (cloud messaging)</li>
                    </ul>
                    <p><strong>Phase 4</strong> gives us the <strong>storage engine</strong> - now we need to build the <strong>communication interface</strong> so external applications can actually use our system!</p>
                </div>
            </section>

            <section id="running-the-system" class="section">
                <h2>🚀 Running the System</h2>

                <h3>Quick Start (PowerShell)</h3>
                <div class="terminal-output">
                    <div class="prompt">PS C:\wiber></div> <span class="comment"># Activate virtual environment</span><br>
                    .\venv\Scripts\Activate<br><br>
                    <div class="prompt">PS C:\wiber></div> <span class="comment"># Run the cluster (starts 3 nodes)</span><br>
                    python scripts\run_cluster.py<br><br>
                    <div class="success">[OK] Starting 3-node cluster...</div><br>
                    <div class="success">[OK] Node n1 started on port 9101</div><br>
                    <div class="success">[OK] Node n2 started on port 9102</div><br>
                    <div class="success">[OK] Node n3 started on port 9103</div><br>
                    <div class="success">[LEADER] Node n1 is the leader (term 1)</div><br><br>
                    <div class="prompt">PS C:\wiber></div> <span class="comment"># Test the API (in another terminal)</span><br>
                    python scripts\test_ping.py<br><br>
                    <div class="success">[OK] PING response: PONG</div><br><br>
                    <div class="prompt">PS C:\wiber></div> <span class="comment"># Test persistent storage</span><br>
                    python scripts\test_persistent_storage.py<br><br>
                    <div class="success">[OK] Messages stored persistently!</div><br>
                    <div class="success">[OK] Log file: data\raft-n1.log</div>
                </div>

                <h3>What You'll See</h3>
                <ol class="step-list">
                    <li><strong>Cluster Startup:</strong> 3 nodes starting up, one becomes leader through Raft election</li>
                    <li><strong>API Testing:</strong> PING/PONG responses from the API server</li>
                    <li><strong>Storage Testing:</strong> Messages being saved to disk files</li>
                    <li><strong>Log Files:</strong> You'll see files like <code>raft-n1.log</code> created in the <code>data</code> folder</li>
                </ol>

                <h3>Current Working Features</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4><span class="icon">🔄</span>Multi-node Cluster</h4>
                        <p>3 nodes with automatic leader election using Raft consensus algorithm</p>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">📡</span>PING/PONG API</span></h4>
                        <p>Basic client communication with health check endpoints</p>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">💾</span>Persistent Storage</span></h4>
                        <p>Messages saved to disk files that survive crashes and restarts</p>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">🔍</span>Deduplication</span></h4>
                        <p>Automatic detection and rejection of duplicate messages</p>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">📁</span>Topic Management</span></h4>
                        <p>Messages organized by topics with individual settings and statistics</p>
                    </div>

                    <div class="feature-card">
                        <h4><span class="icon">👑</span>Raft Consensus</span></h4>
                        <p>Leader election and log replication across all nodes</p>
                    </div>
                </div>
            </section>

            <section id="whats-next" class="section">
                <h2>🔮 What's Next</h2>

                <h3>Current Progress</h3>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Phase</th>
                                <th>Status</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Phase 0: Foundation</td>
                                <td><span class="status-badge status-completed">✅ COMPLETED</span></td>
                                <td>Project setup and basic structure</td>
                            </tr>
                            <tr>
                                <td>Phase 1: Basic Networking</td>
                                <td><span class="status-badge status-completed">✅ COMPLETED</span></td>
                                <td>Nodes can communicate with each other</td>
                            </tr>
                            <tr>
                                <td>Phase 2: Raft Leader Election</td>
                                <td><span class="status-badge status-completed">✅ COMPLETED</span></td>
                                <td>Automatic leader election and consensus</td>
                            </tr>
                            <tr>
                                <td>Phase 3: Log Replication</td>
                                <td><span class="status-badge status-completed">✅ COMPLETED</span></td>
                                <td>Messages replicated across all nodes</td>
                            </tr>
                            <tr>
                                <td><strong>Phase 4: Message Storage</strong></td>
                                <td><span class="status-badge status-completed">✅ COMPLETED</span></td>
                                <td><strong>Persistent storage with deduplication and topics</strong></td>
                            </tr>
                            <tr>
                                <td>Phase 5: Client API</td>
                                <td><span class="status-badge status-pending">⏳ NEXT</span></td>
                                <td>PUB/SUB/HISTORY commands for external applications</td>
                            </tr>
                            <tr>
                                <td>Phase 6: Time Synchronization</td>
                                <td><span class="status-badge status-pending">⏳ PENDING</span></td>
                                <td>Consistent message ordering across nodes</td>
                            </tr>
                            <tr>
                                <td>Phase 7: Fault Tolerance</td>
                                <td><span class="status-badge status-pending">⏳ PENDING</span></td>
                                <td>Handle node failures and network partitions</td>
                            </tr>
                            <tr>
                                <td>Phase 8: Integration & Testing</td>
                                <td><span class="status-badge status-pending">⏳ PENDING</span></td>
                                <td>Complete system testing and documentation</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="next-phase">
                    <h3>🎯 Phase 5: Client API</h3>
                    <p><strong>Next up:</strong> Building the communication interface so external applications can actually use our messaging system!</p>
                    <p><strong>What we'll build:</strong></p>
                    <ul>
                        <li><strong>PUB command:</strong> Publish messages to topics</li>
                        <li><strong>SUB command:</strong> Subscribe to topics and receive messages</li>
                        <li><strong>HISTORY command:</strong> Get past messages from topics</li>
                        <li><strong>Wire protocol:</strong> Text-based protocol for client communication</li>
                    </ul>
                </div>

                <div class="success-box">
                    <h4>🎉 We're 50% Done!</h4>
                    <p>The storage system we built in Phase 4 is the <strong>heart</strong> of any messaging system. Without it, messages would be lost, disorganized, and inefficient.</p>
                    <p>Now we have a solid foundation to build the client-facing features that will make this system actually usable by real applications!</p>
                </div>
            </section>
        </div>

        <div class="footer">
            <h3>🎓 Learning Achievement</h3>
            <p>You've just learned how to build the storage layer of a distributed messaging system!</p>
            <p>This is the same technology used by companies like Netflix, Uber, and LinkedIn for their messaging infrastructure.</p>
            <div class="next-phase">
                <p><strong>Ready for Phase 5?</strong> Let's build the client API! 🚀</p>
            </div>
        </div>
    </div>

    <script>
        // Add copy functionality to code blocks
        document.querySelectorAll('.code-block').forEach(block => {
            const copyBtn = document.createElement('button');
            copyBtn.className = 'copy-btn';
            copyBtn.textContent = 'Copy';
            copyBtn.onclick = () => {
                navigator.clipboard.writeText(block.textContent);
                copyBtn.textContent = 'Copied!';
                setTimeout(() => copyBtn.textContent = 'Copy', 2000);
            };
            block.appendChild(copyBtn);
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('.nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                target.scrollIntoView({ behavior: 'smooth' });
            });
        });

        // Add hover effects to feature cards
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-5px)';
            });
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
</html>
