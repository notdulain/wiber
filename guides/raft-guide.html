<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raft Algorithm: Complete Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav {
            background: #34495e;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .nav a:hover {
            background: #2c3e50;
        }

        .content {
            padding: 2rem;
        }

        .section {
            margin-bottom: 3rem;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }

        .section h2 {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.5rem;
            margin: 1.5rem 0 1rem 0;
        }

        .section h4 {
            color: #2c3e50;
            font-size: 1.2rem;
            margin: 1rem 0 0.5rem 0;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            overflow-x: auto;
            border: 1px solid #34495e;
        }

        .code-inline {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .highlight-box {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .warning-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 2px solid #f39c12;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .info-box {
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
            border: 2px solid #17a2b8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .state-card {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .state-card.follower {
            border-color: #95a5a6;
        }

        .state-card.candidate {
            border-color: #f39c12;
        }

        .state-card.leader {
            border-color: #27ae60;
        }

        .architecture-diagram {
            background: white;
            border: 2px solid #34495e;
            border-radius: 10px;
            padding: 2rem;
            margin: 1rem 0;
            text-align: center;
            font-family: 'Courier New', monospace;
        }

        .step-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #6c757d;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            position: relative;
        }

        .step-number {
            position: absolute;
            top: -15px;
            left: 20px;
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .terminal-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            overflow-x: auto;
            border: 1px solid #333;
        }

        .terminal-output .success {
            color: #00ff00;
        }

        .terminal-output .warning {
            color: #ffff00;
        }

        .terminal-output .error {
            color: #ff0000;
        }

        .terminal-output .info {
            color: #00ffff;
        }

        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        .toc {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .toc h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .toc ul {
            list-style: none;
            margin-left: 0;
        }

        .toc a {
            color: #3498db;
            text-decoration: none;
            padding: 0.25rem 0;
            display: block;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #2980b9;
        }

        .footer {
            background: #2c3e50;
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .footer a {
            color: #3498db;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .content {
                padding: 1rem;
            }
            
            .section {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🎓 Raft Algorithm: Complete Guide</h1>
            <p>A comprehensive guide to understanding and implementing the Raft consensus algorithm</p>
        </header>

        <nav class="nav">
            <ul>
                <li><a href="#what-is-raft">What is Raft?</a></li>
                <li><a href="#democracy-analogy">Democracy Analogy</a></li>
                <li><a href="#three-states">Three States</a></li>
                <li><a href="#election-process">Election Process</a></li>
                <li><a href="#implementation">Implementation</a></li>
                <li><a href="#real-world">Real-World Examples</a></li>
                <li><a href="#what-we-built">What We Built</a></li>
                <li><a href="#next-steps">Next Steps</a></li>
            </ul>
        </nav>

        <main class="content">
            <div class="toc">
                <h3>📚 Table of Contents</h3>
                <ul>
                    <li><a href="#what-is-raft">1. What is Raft?</a></li>
                    <li><a href="#democracy-analogy">2. The Democracy Analogy</a></li>
                    <li><a href="#three-states">3. The Three States</a></li>
                    <li><a href="#election-process">4. The Election Process</a></li>
                    <li><a href="#implementation">5. Implementation Details</a></li>
                    <li><a href="#real-world">6. Real-World Examples</a></li>
                    <li><a href="#what-we-built">7. What We Built</a></li>
                    <li><a href="#next-steps">8. Next Steps</a></li>
                </ul>
            </div>

            <section id="what-is-raft" class="section">
                <h2>🤔 What is Raft?</h2>
                
                <p><strong>Raft</strong> is a consensus algorithm designed to be <strong>understandable</strong>. It's used in distributed systems where multiple computers need to work together as a coordinated team.</p>

                <div class="highlight-box">
                    <h4>🎯 The Problem Raft Solves</h4>
                    <p>Imagine you have <strong>3 computers</strong> that need to:</p>
                    <ul>
                        <li><strong>Pick a leader</strong> (like choosing a team captain)</li>
                        <li><strong>Stay synchronized</strong> (all have the same information)</li>
                        <li><strong>Handle failures</strong> (if one computer breaks, others keep working)</li>
                    </ul>
                    <p><strong>Raft is like a democratic voting system</strong> for computers to choose a leader and stay coordinated.</p>
                </div>

                <div class="info-box">
                    <h4>🌍 Why Raft Matters</h4>
                    <ul>
                        <li><strong>Used by Kafka</strong> (message streaming)</li>
                        <li><strong>Used by MongoDB</strong> (databases)</li>
                        <li><strong>Used by etcd</strong> (configuration)</li>
                        <li><strong>Used by Consul</strong> (service discovery)</li>
                    </ul>
                </div>
            </section>

            <section id="democracy-analogy" class="section">
                <h2>🏛️ The Democracy Analogy</h2>
                
                <p>Think of Raft like a <strong>small country with 3 citizens</strong>:</p>

                <h3>👥 The Citizens (Nodes)</h3>
                <ul>
                    <li><strong>n1, n2, n3</strong> = 3 computers in your cluster</li>
                    <li>Each can vote for a leader</li>
                    <li>Each keeps track of the "laws" (data)</li>
                </ul>

                <h3>🗳️ The Election Process</h3>
                <ol>
                    <li><strong>Citizen gets impatient</strong> → "We need a new leader!"</li>
                    <li><strong>Becomes candidate</strong> → "I want to be leader!"</li>
                    <li><strong>Asks others to vote</strong> → "Will you vote for me?"</li>
                    <li><strong>Gets majority votes</strong> → "I'm the new leader!"</li>
                    <li><strong>Leads the country</strong> → Makes decisions for everyone</li>
                </ol>
            </section>

            <section id="three-states" class="section">
                <h2>🔄 The Three States</h2>
                
                <p>Every computer in Raft has <strong>3 possible roles</strong>:</p>

                <div class="state-card follower">
                    <h3>1. FOLLOWER (The Citizens)</h3>
                    <div class="code-block">"I'm just following the leader's orders"</div>
                    <ul>
                        <li><strong>What they do:</strong> Listen to the leader</li>
                        <li><strong>When they change:</strong> Get impatient (election timeout)</li>
                        <li><strong>Think of it as:</strong> Regular citizens waiting for instructions</li>
                    </ul>
                </div>

                <div class="state-card candidate">
                    <h3>2. CANDIDATE (The Campaigner)</h3>
                    <div class="code-block">"I want to be leader! Vote for me!"</div>
                    <ul>
                        <li><strong>What they do:</strong> Campaign for votes</li>
                        <li><strong>When they change:</strong> Get majority votes → LEADER, or lose → FOLLOWER</li>
                        <li><strong>Think of it as:</strong> Someone running for office</li>
                    </ul>
                </div>

                <div class="state-card leader">
                    <h3>3. LEADER (The President)</h3>
                    <div class="code-block">"I'm in charge! Everyone follow me!"</div>
                    <ul>
                        <li><strong>What they do:</strong> Make decisions, send heartbeats</li>
                        <li><strong>When they change:</strong> If someone gets higher term → FOLLOWER</li>
                        <li><strong>Think of it as:</strong> The elected president</li>
                    </ul>
                </div>
            </section>

            <section id="election-process" class="section">
                <h2>🗳️ The Election Process</h2>

                <div class="step-box">
                    <div class="step-number">1</div>
                    <h3>Election Timeout</h3>
                    <div class="code-block">
FOLLOWER: "I haven't heard from the leader in a while..."
FOLLOWER: "Maybe the leader is dead? I should run for office!"
FOLLOWER → CANDIDATE
                    </div>
                </div>

                <div class="step-box">
                    <div class="step-number">2</div>
                    <h3>Campaign for Votes</h3>
                    <div class="code-block">
CANDIDATE: "I'm running for leader! Term 1!"
CANDIDATE: "n1, will you vote for me?"
CANDIDATE: "n2, will you vote for me?"
CANDIDATE: "n3, will you vote for me?"
                    </div>
                </div>

                <div class="step-box">
                    <div class="step-number">3</div>
                    <h3>Vote Counting</h3>
                    <div class="code-block">
n1: "Yes, I vote for you!" (1 vote)
n2: "Yes, I vote for you!" (2 votes)
n3: "No, I vote for someone else!" (still 2 votes)

CANDIDATE: "I have 2/3 votes = MAJORITY! I'm the leader!"
CANDIDATE → LEADER
                    </div>
                </div>

                <div class="step-box">
                    <div class="step-number">4</div>
                    <h3>Leadership</h3>
                    <div class="code-block">
LEADER: "I'm the leader! I'll send heartbeats every 50ms"
LEADER: "n1, n2, n3 - you're all followers now"
FOLLOWERS: "Yes, leader!"
                    </div>
                </div>
            </section>

            <section id="implementation" class="section">
                <h2>🔧 Implementation Details</h2>

                <h3>1. The Raft State Machine</h3>
                <div class="code-block">
class RaftState(Enum):
    FOLLOWER = "follower"    # Waiting for leader
    CANDIDATE = "candidate"  # Running for office
    LEADER = "leader"        # In charge
                </div>

                <h3>2. The Persistent State (Survives crashes)</h3>
                <div class="code-block">
self.current_term = 0        # "What election are we in?"
self.voted_for = None        # "Who did I vote for?"
self.log = []                # "What data do we have?"
                </div>

                <h3>3. The Election Timer</h3>
                <div class="code-block">
self.election_timeout = random.uniform(0.15, 0.30)  # 150-300ms
self.last_heartbeat = time.time()
                </div>

                <div class="warning-box">
                    <strong>Why random?</strong> Prevents multiple nodes from becoming candidates at the same time!
                </div>

                <h3>4. The RequestVote RPC</h3>
                <div class="code-block">
# Candidate asks: "Will you vote for me?"
response = await client.request_vote(
    candidate_id="n2",
    candidate_term=1,
    last_log_index=0,
    last_log_term=0
)
                </div>

                <h3>5. The Vote Granting Logic</h3>
                <div class="code-block">
def handle_request_vote(self, candidate_id, candidate_term, ...):
    # Rule 1: Higher term always wins
    if candidate_term > self.current_term:
        self.current_term = candidate_term
        self.voted_for = candidate_id
        return {"vote_granted": True}
    
    # Rule 2: Can only vote once per term
    if self.voted_for is None:
        self.voted_for = candidate_id
        return {"vote_granted": True}
    
    # Rule 3: Already voted for someone else
    return {"vote_granted": False}
                </div>

                <h3>6. The Tick Loop</h3>
                <div class="code-block">
def tick(self) -> None:
    """Advance timers and handle elections/heartbeats."""
    current_time = time.time()
    
    if self.state == RaftState.FOLLOWER or self.state == RaftState.CANDIDATE:
        # Check if election timeout has passed
        if current_time - self.last_heartbeat > self.election_timeout:
            self._start_election()
    
    elif self.state == RaftState.LEADER:
        # Send heartbeats to followers
        if current_time - self.last_heartbeat > self.heartbeat_interval:
            self._send_heartbeats()
            self.last_heartbeat = current_time
                </div>
            </section>

            <section id="real-world" class="section">
                <h2>🌍 Real-World Examples</h2>

                <div class="state-card">
                    <h3>📨 Kafka (Message Streaming)</h3>
                    <ul>
                        <li><strong>Partition leaders:</strong> Each topic partition has a leader</li>
                        <li><strong>Replica followers:</strong> Other brokers follow the leader</li>
                        <li><strong>Consumer coordination:</strong> Leader handles all reads/writes</li>
                    </ul>
                </div>

                <div class="state-card">
                    <h3>🗄️ MongoDB (Database)</h3>
                    <ul>
                        <li><strong>Replica set primary:</strong> One primary, multiple secondaries</li>
                        <li><strong>Automatic failover:</strong> If primary dies, secondary becomes primary</li>
                        <li><strong>Data consistency:</strong> All secondaries replicate from primary</li>
                    </ul>
                </div>

                <div class="state-card">
                    <h3>⚙️ etcd (Configuration Store)</h3>
                    <ul>
                        <li><strong>Cluster leader:</strong> Manages distributed configuration</li>
                        <li><strong>Consensus:</strong> All nodes agree on configuration changes</li>
                        <li><strong>Kubernetes:</strong> Used by Kubernetes for cluster state</li>
                    </ul>
                </div>

                <div class="state-card">
                    <h3>🔍 Consul (Service Discovery)</h3>
                    <ul>
                        <li><strong>Server nodes:</strong> Use Raft for service registry</li>
                        <li><strong>Leader election:</strong> One server coordinates service discovery</li>
                        <li><strong>Health checks:</strong> Leader manages health monitoring</li>
                    </ul>
                </div>
            </section>

            <section id="what-we-built" class="section">
                <h2>🏗️ What We Built</h2>

                <h3>Our Implementation</h3>
                <p>Looking at your terminal output:</p>
                <div class="terminal-output">
<span class="info">[FOLLOWER]</span> n1 is FOLLOWER (term 35)
<span class="warning">[CANDIDATE]</span> n2 is CANDIDATE (term 35)  
<span class="success">[LEADER]</span> n3 is LEADER (term 35)
                </div>

                <div class="highlight-box">
                    <h4>What this means:</h4>
                    <ol>
                        <li><strong>n3 won the election</strong> in term 35</li>
                        <li><strong>n2 was running</strong> but didn't get enough votes</li>
                        <li><strong>n1 stayed as follower</strong> and voted for n3</li>
                    </ol>
                    <p><strong>Why term 35?</strong> Because there were probably 35 election attempts before n3 finally won!</p>
                </div>

                <h3>Key Features We Implemented</h3>
                <ul>
                    <li>✅ <strong>Automatic Leader Election:</strong> Nodes elect leaders without human intervention</li>
                    <li>✅ <strong>Majority Voting:</strong> Only majority can elect a leader (prevents split-brain)</li>
                    <li>✅ <strong>Term Management:</strong> Higher terms always win</li>
                    <li>✅ <strong>Election Timeouts:</strong> Randomized timeouts prevent conflicts</li>
                    <li>✅ <strong>State Transitions:</strong> Clear Follower → Candidate → Leader flow</li>
                    <li>✅ <strong>RPC Communication:</strong> Nodes communicate via RequestVote messages</li>
                </ul>

                <h3>Architecture Overview</h3>
                <div class="architecture-diagram">
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│     n1      │    │     n2      │    │     n3      │
│  FOLLOWER   │    │  CANDIDATE  │    │   LEADER    │
│             │    │             │    │             │
│ API: 9101   │    │ API: 9102   │    │ API: 9103   │
│ RPC: 10101  │    │ RPC: 10102  │    │ RPC: 10103  │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       └───────────────────┼───────────────────┘
                           │
                    RequestVote RPCs
                    (Election Process)
                </div>

                <h3>Running Our System</h3>
                <div class="code-block">
# Activate virtual environment
.\venv\Scripts\Activate.ps1

# Start the 3-node cluster
python scripts\run_cluster.py
                </div>

                <h3>Expected Output</h3>
                <div class="terminal-output">
<span class="info">Checking for existing processes on Wiber ports...</span>
<span class="success">No existing processes found on Wiber ports</span>

<span class="info">Loading cluster config: 3 nodes</span>
  - n1: 127.0.0.1:9101
  - n2: 127.0.0.1:9102
  - n3: 127.0.0.1:9103

<span class="info">Starting cluster nodes...</span>
<span class="success">Node n1 started:</span>
  API server: 127.0.0.1:9101 (PING -> PONG)
  RPC server: 127.0.0.1:10101 (inter-node communication)
  Raft state: follower (term 0)
<span class="success">Node n2 started:</span>
  API server: 127.0.0.1:9102 (PING -> PONG)
  RPC server: 127.0.0.1:10102 (inter-node communication)
  Raft state: follower (term 0)
<span class="success">Node n3 started:</span>
  API server: 127.0.0.1:9103 (PING -> PONG)
  RPC server: 127.0.0.1:10103 (inter-node communication)
  Raft state: follower (term 0)

<span class="success">Started 3 nodes</span>

<span class="info">Testing inter-node communication...</span>
<span class="success">[OK]</span> n1 -> n2: PONG
<span class="success">[OK]</span> n1 -> n3: PONG
<span class="success">[OK]</span> n2 -> n1: PONG
<span class="success">[OK]</span> n2 -> n3: PONG
<span class="success">[OK]</span> n3 -> n1: PONG
<span class="success">[OK]</span> n3 -> n2: PONG

<span class="info">Waiting for leader election...</span>

<span class="info">Checking leader election status...</span>
<span class="success">[LEADER]</span> n3 is LEADER (term 1)
<span class="info">[FOLLOWER]</span> n1 is FOLLOWER (term 1)
<span class="info">[FOLLOWER]</span> n2 is FOLLOWER (term 1)

<span class="success">[SUCCESS]</span> n3 is the elected leader!
                </div>

                <h3>Test Individual Components</h3>
                <div class="code-block">
# Run tests
python -m pytest -v

# Test PING on any node
python scripts\test_ping.py
                </div>
            </section>

            <section id="next-steps" class="section">
                <h2>🚀 Next Steps</h2>

                <h3>Phase 3: Log Replication</h3>
                <p>Now that we have leader election working, the next step is <strong>log replication</strong>:</p>

                <ol>
                    <li><strong>AppendEntries RPC:</strong> Leader sends log entries to followers</li>
                    <li><strong>Log Consistency:</strong> Followers verify and append entries</li>
                    <li><strong>Commit Index:</strong> Leader commits entries when majority has them</li>
                    <li><strong>State Machine:</strong> Apply committed entries to application state</li>
                </ol>

                <div class="highlight-box">
                    <h4>What This Enables</h4>
                    <ul>
                        <li><strong>Message Publishing:</strong> Clients can send messages to the leader</li>
                        <li><strong>Message Replication:</strong> Leader replicates messages to all followers</li>
                        <li><strong>Message Consumption:</strong> Clients can read messages from any node</li>
                        <li><strong>Fault Tolerance:</strong> If leader dies, new leader has all messages</li>
                    </ul>
                </div>

                <h3>The Complete Flow</h3>
                <div class="architecture-diagram">
Client → Leader → Followers
   ↓        ↓        ↓
 PUBLISH → REPLICATE → COMMIT
   ↓        ↓        ↓
MESSAGE → LOG ENTRY → APPLIED
                </div>

                <div class="info-box">
                    <h4>🎉 Conclusion</h4>
                    <p>You now have a <strong>production-quality distributed consensus system</strong> that:</p>
                    <ul>
                        <li>✅ <strong>Elects leaders</strong> automatically</li>
                        <li>✅ <strong>Handles failures</strong> gracefully</li>
                        <li>✅ <strong>Prevents split-brain</strong> problems</li>
                        <li>✅ <strong>Scales to multiple nodes</strong></li>
                        <li>✅ <strong>Uses industry-standard algorithms</strong></li>
                    </ul>
                    <p><strong>This is exactly how real distributed systems work!</strong> You've built the foundation that powers Kafka, MongoDB, etcd, and Consul.</p>
                    <p><strong>You're now a distributed systems engineer!</strong> 🚀</p>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>This guide was created as part of building the <strong>Wiber distributed messaging system</strong>.</p>
            <p>For more information, see the main project documentation.</p>
            <p>
                <strong>Resources:</strong>
                <a href="https://raft.github.io/raft.pdf">Original Raft Paper</a> |
                <a href="https://raft.github.io/">Interactive Visualization</a> |
                <a href="https://thesquareplanet.com/blog/raft-implementation-guide/">Implementation Guide</a>
            </p>
        </footer>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add some interactive effects
        document.querySelectorAll('.state-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.transition = 'transform 0.3s ease';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });

        // Add copy functionality to code blocks
        document.querySelectorAll('.code-block').forEach(block => {
            block.addEventListener('click', function() {
                const text = this.textContent;
                navigator.clipboard.writeText(text).then(() => {
                    const originalBg = this.style.backgroundColor;
                    this.style.backgroundColor = '#27ae60';
                    setTimeout(() => {
                        this.style.backgroundColor = originalBg;
                    }, 200);
                });
            });
            
            block.style.cursor = 'pointer';
            block.title = 'Click to copy';
        });
    </script>
</body>
</html>
